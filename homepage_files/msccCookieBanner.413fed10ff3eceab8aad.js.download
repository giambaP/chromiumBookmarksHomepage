(window.webpackJsonp=window.webpackJsonp||[]).push([["msccCookieBanner"],{lUXz:function(e,t,n){"use strict";n.r(t);var i=n("G82u");class o{}o.cookieBannerRendered=new i.a("MsccCookieBannerRendered");var r=n("D57K"),s=n("s9+9"),c=n("Tn4X"),a=n("1w6q"),d=n("3Amp"),l=n("HxRh");const h={msccStyleSheetsNotSpecified:"MSCC Stylesheets not specified",msccScriptsNotSpecified:"MSCC Scripts not specified",failedToParseDataStatics:"Failed to parse statics URLs for data-",failedToLoadResource:"Failed to load resource"},m={CookieComplianceBanner:"cookiecompliance"};var u=n("NiiX"),p=n("zMW0"),S=n("rvYQ"),C=n("CA7x");class k{constructor(){this.stylesheetRelValue="stylesheet",this.cookieBannerElement=document.getElementById("consent-banner-container")}showBanner(){return Object(r.a)(this,void 0,void 0,function*(){if(this.cookieBannerElement){var e=[this.mountStyles(),this.mountScripts()];yield Promise.all(e),this.cookieBannerElement.style.display="block",this.addTelemetryAttributesAndSendPartialImpression()}})}registerForConsentEvent(e){window.mscc.on("consent",()=>{e&&e()})}addTelemetryAttributesAndSendPartialImpression(){const e=u.a.getChildTelemetryItem({index:S.a.RootTelemetryId},m.CookieComplianceBanner,p.b.MsccCookieComplianceBanner),t=u.a.render(e);this.cookieBannerElement.setAttribute("data-m",t["data-m"]),this.cookieBannerElement.setAttribute("data-id",t["data-id"].toString()),C.a.trackPartialImpression(this.cookieBannerElement,!1,"partial","MsccCookieBanner")}mountScripts(){return Object(r.a)(this,void 0,void 0,function*(){const e=this.getStaticsUrlsFromDataAttribute("scripts");if(!(e.length>0))throw this.logAppError(l.n.ScriptsNotFound,h.msccScriptsNotSpecified),new Error(h.msccScriptsNotSpecified);var t=e.map(e=>this.getPromiseToMountScript(e));yield Promise.all(t)})}mountStyles(){return Object(r.a)(this,void 0,void 0,function*(){const e=this.getStaticsUrlsFromDataAttribute("styles");if(!(e.length>0))throw this.logAppError(l.n.StyleSheetsNotFound,h.msccStyleSheetsNotSpecified),new Error(h.msccStyleSheetsNotSpecified);{let t=e.map(e=>this.getPromiseToMountStyleSheet(e));yield Promise.all(t)}})}getStaticsUrlsFromDataAttribute(e){const t=this.cookieBannerElement.dataset[e];let n=[];if(t)try{n=JSON.parse(t)}catch(t){throw this.logAppError(l.n.FailedToParseStaticsUrls,h.failedToParseDataStatics+e),new Error(h.failedToParseDataStatics+e)}return n}getPromiseToMountScript(e){return Object(r.a)(this,void 0,void 0,function*(){return new Promise((t,n)=>{let i=document.createElement("script");i.src=e,i.onload=()=>{t()},i.onerror=e=>{this.logAppError(l.n.FailedToMountScript,JSON.stringify(e)),n(e)},document.head.appendChild(i)})})}getPromiseToMountStyleSheet(e){return Object(r.a)(this,void 0,void 0,function*(){return new Promise((t,n)=>{let i=document.createElement("link");i.href=e,i.rel=this.stylesheetRelValue,i.onload=()=>{t()},i.onerror=e=>{this.logAppError(l.n.FailedToMountStyleSheet,JSON.stringify(e)),n(e)},document.head.appendChild(i)})})}logAppError(e,t){C.a.trackAppErrorEvent(Object.assign(Object.assign({},e),{message:t}))}}var g=n("9J8d");class v extends a.a{constructor(e,t,n,i,o){super(e,t,n,i,o),this.clickEventName="click",this.inputEventName="input",this.msccCookieConsentHelper=new k,this.initializeCookieBanner()}initializeCookieBanner(){return Object(r.a)(this,void 0,void 0,function*(){let e=g.a.getInstance().rootReducer.connector(s.a.SharedState),t=e.getCurrentState().cookieConsentStatus===c.a.Required,n=d.a.cookieConsentStatus.getActionSender(e);t&&(yield this.msccCookieConsentHelper.showBanner(),o.cookieBannerRendered.getActionSender(this).send(!0),this.registerImplicitConsentCheckEventListeners(),this.msccCookieConsentHelper.registerForConsentEvent(()=>{n.send(c.a.NotRequired)}))})}registerImplicitConsentCheckEventListeners(){document.body.addEventListener(this.clickEventName,this.handleImplicitConsentCheck),document.body.addEventListener(this.inputEventName,this.handleImplicitConsentCheck)}handleImplicitConsentCheck(e){"false"!==e.target.getAttribute("data-mscc-ic")&&(window.mscc.setConsent(),document.body.removeEventListener(this.clickEventName,this.handleImplicitConsentCheck),document.body.removeEventListener(this.inputEventName,this.handleImplicitConsentCheck))}}class f{reduce(e,t){return e||{}}}var E=n("hWAW");n.d(t,"ToolingInfo",function(){return y}),n.d(t,"getMsccCookieBannerHeightInPx",function(){return E.a}),n.d(t,"MsccCookieBannerActions",function(){return o}),n.d(t,"MsccCookieBannerDataConnector",function(){return v}),n.d(t,"MsccCookieBannerDataReducer",function(){return f});const y={experienceConfigSchema:{}}}}]);
//# sourceMappingURL=msccCookieBanner.413fed10ff3eceab8aad.js.map
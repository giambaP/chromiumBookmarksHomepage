(window.webpackJsonp=window.webpackJsonp||[]).push([["marketSelector"],{"0pOX":function(e,t,s){"use strict";s.r(t);var i,n=s("MeOA");!function(e){e.inspector=function(e){return{props:{changeMarketText:e.config.changeMarketText,isTrackingEnabled:e.connectorArgs.isTrackingEnabled,selectPositionLogic:e.connectorArgs.selectPositionLogic,options:e.config.markets,selectedMarketId:e.state.selectedMarketId},missingChildren:[]}}}(i||(i={}));var o=s("+viU"),a=s("D57K"),r=s("/E6d"),l=s("FPTP"),c=s("K5uZ"),d=s("9Vvf"),p=s("5mwN"),h=s("0fst");const u={select_menu:{"z-index":`${h.a.Neutral}`,"margin-top":"0px !important"},select__menuPositioningRegion:{"z-index":`${h.a.Above}`}};var g=s("ERkP"),m=s.n(g),b=s("o1qX");class f extends p.a{constructor(e){super(e),this.rootElement=m.a.createRef(),this.changeMarketTypographyId="marketSelectorChangeMarket",this.handledProps={changeMarketText:void 0,changeMarketSelection:void 0,customField:void 0,disabled:void 0,experienceName:void 0,isTrackingEnabled:void 0,managedClasses:void 0,onExperienceMilestoneTimingUpdate:void 0,options:void 0,selectedMarketId:void 0,selectPositionLogic:void 0},this.marketSelectorDropDownPosition=()=>{if(this.props.selectPositionLogic){let e=this.getmarketSelectorDropDownPosition();this.setState({marketSelectorListPosition:e})}},this.getmarketSelectorDropDownPosition=()=>{let e=this.rootElement.current.getBoundingClientRect();return(window.innerHeight||document.documentElement.clientHeight)-e.bottom>368?r.c.bottom:r.c.top},this.triggerRenderFunction=(e,t,s)=>{if(e.multiselectable)return null;const{select_button:i,select_buttonContentRegion:n,select_buttonDisplayText:o,select_toggleGlyph:a}=e.managedClasses;return m.a.createElement("button",Object.assign({},this.props.isTrackingEnabled?{}:{"data-customhandled":"1"},{"aria-atomic":!0,"aria-expanded":t.isMenuOpen,"aria-labelledby":this.changeMarketTypographyId+" "+s,className:Object(b.a)(i),disabled:e.disabled,id:s,onClick:this.marketSelectorDropDownPosition,"aria-haspopup":!0}),m.a.createElement("span",{className:Object(b.a)(n)},m.a.createElement("div",Object.assign({},this.props.isTrackingEnabled?{}:{"data-customhandled":"1"},{className:Object(b.a)(o)}),t.displayString),m.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 12",className:Object(b.a)(a),"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg"},m.a.createElement("path",{d:"M11.3613 2.73633L11.8887 3.26367L6 9.15234L0.111328 3.26367L0.638672 2.73633L6 8.09766L11.3613 2.73633Z"}))))},this.state={marketSelectorListPosition:r.c.bottom}}render(){super.render();const{managedClasses:e,options:t}=this.props;return m.a.createElement("div",Object.assign({role:"presentation",ref:this.rootElement},this.unhandledProps(),{className:this.generateClassNames(e.marketSelectorDefault)}),m.a.createElement(l.a,Object.assign({id:this.changeMarketTypographyId,"aria-hidden":!0},this.props.changeMarketText)),m.a.createElement(c.a,{className:e.marketSelectorSelector,jssStyleSheet:u,onValueChange:this.props.changeMarketSelection,selectedItems:[this.props.selectedMarketId],menuFlyoutConfig:this.props.selectPositionLogic?{verticalPositioningMode:r.a.adjacent,defaultVerticalPosition:this.state.marketSelectorListPosition,verticalLockToDefault:!0,viewport:this.rootElement}:null,trigger:this.triggerRenderFunction,disabled:this.props.disabled},t.map((e,s)=>{const{direction:i}=e,n=Object(a.b)(e,["direction"]);return m.a.createElement(d.a,Object.assign({key:s,dir:i,"aria-posinset":s,"aria-setsize":t.length},n))})))}}f.defaultProps={experienceName:"MarketSelector"};var y=s("zSBV"),v=s("rvYQ"),I=s("esXg"),S=s("mzbC"),O=s("WfnD"),k=s("XLvf");class x extends O.a{constructor(){super(...arguments),this.isTrackingEnabled=!0,this.changeMarketSelection=e=>{y.a.updateMarketSelection.getActionSender(this).send(e)},this.compareDisplayNameDesc=(e,t)=>e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}mapStateToProps(e){const t=e.selectedMarketId||v.a.CurrentMarket,s={config:this.config,children:this.childComponentInstanceList,state:Object.assign(Object.assign({},e),{selectedMarketId:t}),connectorArgs:{isTrackingEnabled:this.isTrackingEnabled,selectPositionLogic:this.selectPositionLogic}},n=i.inspector(s);return Object.assign(Object.assign(Object.assign({},n.props),{changeMarketSelection:this.changeMarketSelection,disabled:e.disabled,options:n.props.options.sort(this.compareDisplayNameDesc)}),this.telemetryTags)}onComponentConnect(e){return Object(a.a)(this,void 0,void 0,function*(){if(yield O.a.prototype.onComponentConnect.call(this,e),e&&!Object(k.isNullOrUndefined)(e.isTrackingEnabled)&&(this.isTrackingEnabled=e.isTrackingEnabled),this.selectPositionLogic=!(!e||!e.selectPositionLogic)&&e.selectPositionLogic,!this.config.usePageSettingsData)return;const t=yield Object(I.a)(),s=t?t.getCurrentState():null;s?(y.a.updateMarketSelection.getActionSender(this).send(s.market),S.a.marketUpdated.registerObserver(e=>{const t=e.params[0];y.a.updateMarketSelection.getActionSender(this).send(t)})):y.a.getDefaultMarketFailed.getActionSender(this).send()})}}var C=s("05Au");class P{reduce(e,t){if(!e)return{selectedMarketId:"en-us",disabled:!1};if(!t)return e;let s;return C.a.handleAction(t,y.a.updateMarketSelection,t=>{s=Object.assign(Object.assign({},e),{selectedMarketId:t})}),C.a.handleAction(t,y.a.getDefaultMarketFailed,()=>{s=Object.assign(Object.assign({},e),{selectedMarketId:null})}),C.a.handleAction(t,y.a.toggleDisable,t=>{(s=Object.assign({},e)).disabled=t}),s||e}}s.d(t,"MarketSelector",function(){return M}),s.d(t,"ToolingInfo",function(){return j}),s.d(t,"MarketSelectorActions",function(){return y.a}),s.d(t,"MarketSelectorConnector",function(){return x}),s.d(t,"MarketSelectorReducer",function(){return P});const M=Object(o.a)({marketSelectorDefault:{"min-width":"200px"},marketSelectorSelector:{height:"32px","margin-top":"10px","margin-bottom":"8px",width:"100%","& button span":{display:"-ms-grid","-ms-grid-columns":"1fr auto","& svg":{"-ms-grid-column":"2"}}}})(f),j={reactComponent:M,experienceConfigSchema:n.MarketSelectorConfigSchema,mockState:n.mockStates,mockConfig:n.mockConfig,mockConnectorArgs:n.mockConnectorArgs,inspector:i.inspector}},"2tnv":function(e,t,s){"use strict";function i(){return{"white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}}s.d(t,"a",function(){return i})},"8pea":function(e,t,s){"use strict";var i=s("OnwC"),n=s("Gy7L"),o=s("kpPY"),a=s("o1qX"),r=s("yqT/"),l=s("DCIk"),c=s("d/Vl"),d=s("ERkP"),p=s.n(d),h=s("eGM7"),u=s("looh");class g extends i.a{constructor(e){super(e),this.handledProps={children:void 0,defaultSelection:void 0,disabled:void 0,labelledBy:void 0,managedClasses:void 0,multiselectable:void 0,onItemInvoked:void 0,onSelectedItemsChanged:void 0,selectedItems:void 0,typeAheadEnabled:void 0,typeAheadPropertyKey:void 0,focusItemOnMount:void 0,selectOnFocus:void 0},this.rootElement=p.a.createRef(),this.typeAheadString="",this.shiftRangeSelectStartIndex=-1,this.renderChild=(e,t)=>p.a.cloneElement(e,{tabIndex:t===this.state.focusIndex?0:-1}),this.isFocusableElement=e=>e instanceof HTMLElement&&"option"===e.getAttribute("role")&&!this.isDisabledElement(e)&&!this.props.disabled,this.isDisabledElement=e=>e instanceof HTMLElement&&"true"===e.getAttribute("aria-disabled"),this.setInitialFocus=e=>{let t=-1;-1!==(t=e.length>0?g.getItemIndexById(e[0].id,this.props.children):this.domChildren().findIndex(this.isFocusableElement))&&(this.props.focusItemOnMount&&this.setFocus(t,1),this.setState({focusIndex:t}))},this.getInitialSelection=()=>{let e;return e=void 0!==this.props.selectedItems?g.getListboxItemDataFromIds(this.props.selectedItems,this.props.children):g.getListboxItemDataFromIds(this.props.defaultSelection,this.props.children),!this.props.multiselectable&&e.length>1&&(e=e.slice(0,1)),e},this.listboxItemfocused=(e,t)=>{if(this.props.disabled)return;const s=t.currentTarget,i=this.domChildren().indexOf(s);this.isDisabledElement(s)?s.blur():(this.setState({focusIndex:i,focussedItemId:e.id}),!this.props.multiselectable&&this.props.selectOnFocus&&this.updateSelection([e]))},this.handleMenuKeyDown=e=>{if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),e.defaultPrevented||this.props.disabled)return;let t;switch(e.keyCode){case n.h:case n.g:case n.l:case n.m:return;case n.b:case n.d:if(t=this.setFocus(this.state.focusIndex+1,1),this.props.multiselectable&&e.shiftKey&&""!==t){const e=g.getItemPropsById(t,this.props.children);null!==e&&this.toggleItem(e)}e.preventDefault();break;case n.e:case n.c:if(t=this.setFocus(this.state.focusIndex-1,-1),this.props.multiselectable&&e.shiftKey&&""!==t){const e=g.getItemPropsById(t,this.props.children);null!==e&&this.toggleItem(e)}e.preventDefault();break;case n.f:this.props.multiselectable&&e.shiftKey&&e.ctrlKey&&this.selectRange(this.state.focusIndex,this.domChildren().length-1),this.setFocus(this.domChildren().length-1,-1);break;case n.i:this.props.multiselectable&&e.shiftKey&&e.ctrlKey&&this.selectRange(0,this.state.focusIndex),this.setFocus(0,1);break;default:"A"===e.key?this.selectRange(0,this.domChildren().length):!e.ctrlKey&&this.props.typeAheadEnabled&&this.processTypeAhead(e)}},this.processTypeAhead=e=>{clearTimeout(this.typeAheadTimer),this.typeAheadString=this.typeAheadString+e.key.toLowerCase();let t=-1;p.a.Children.toArray(this.props.children).some((e,s)=>void 0!==e.props[this.props.typeAheadPropertyKey]&&(Object(o.c)(e.props[this.props.typeAheadPropertyKey].toLowerCase(),this.typeAheadString)?(t=s,!0):void 0)),-1!==t?(this.typeAheadTimer=setTimeout(()=>{this.typeAheadTimerExpired()},1e3),this.setFocus(t,1)):this.typeAheadString=""},this.typeAheadTimerExpired=()=>{this.typeAheadString="",clearTimeout(this.typeAheadTimer)},this.listboxItemInvoked=(e,t)=>{if(this.props.disabled)return;"function"==typeof this.props.onItemInvoked&&this.props.onItemInvoked(e);const s=t.currentTarget,i=this.domChildren().indexOf(s);this.props.multiselectable&&"click"===t.type?(t.shiftKey&&-1!==this.shiftRangeSelectStartIndex||(this.shiftRangeSelectStartIndex=i),t.ctrlKey?this.toggleItem(e):t.shiftKey?this.selectRange(this.shiftRangeSelectStartIndex,i):this.updateSelection([e])):this.props.multiselectable&&"keydown"===t.type?t.shiftKey?this.selectRange(this.shiftRangeSelectStartIndex,i):this.toggleItem(e):this.updateSelection([e])},this.toggleItem=e=>{const t=this.state.selectedItems.filter(t=>t.id!==e.id);if(t.length<this.state.selectedItems.length)this.updateSelection(t);else{const t=this.state.selectedItems.concat([e]);this.updateSelection(t)}},this.selectRange=(e,t)=>{const s=p.a.Children.toArray(this.props.children).slice(e>=t?t:e,e>=t?e+1:t+1).map(e=>e.props);this.updateSelection(s)},this.updateSelection=e=>{const t=g.validateSelection(e,this.props.children);Object(l.a)(t,this.state.selectedItems)||(void 0===this.props.selectedItems&&this.setState({selectedItems:t}),this.props.onSelectedItemsChanged&&this.props.onSelectedItemsChanged(t))},this.state={focusIndex:-1,focussedItemId:"",selectedItems:this.getInitialSelection()}}static getListboxItemDataFromIds(e,t){return g.validateSelection(e,t)}static getItemIndexById(e,t){return p.a.Children.toArray(t).findIndex(t=>void 0!==t.props[g.idPropertyKey]&&t.props[g.idPropertyKey]===e)}static isValidSelectedItem(e){return void 0!==e&&!0!==e.props[g.disabledPropertyKey]&&void 0!==e.props[g.valuePropertyKey]}static getNodeById(e,t){return p.a.Children.toArray(t).find(t=>void 0!==t.props[g.idPropertyKey]&&t.props[g.idPropertyKey]===e)}static getItemPropsById(e,t){const s=this.getNodeById(e,t);return void 0!==s?s.props:null}static validateSelection(e,t){return e.map(e=>{let s="";s="string"==typeof e?e:e.id;const i=this.getNodeById(s,t);return g.isValidSelectedItem(i)?i.props:null}).filter(e=>null!==e)}render(){return p.a.createElement("div",Object.assign({},this.unhandledProps(),{ref:this.rootElement,role:"listbox","aria-disabled":this.props.disabled||null,"aria-multiselectable":this.props.multiselectable||null,"aria-activedescendant":this.state.focussedItemId,"aria-labelledby":this.props.labelledBy||null,className:this.generateClassNames(),onKeyDown:this.handleMenuKeyDown}),p.a.createElement(u.a.Provider,{value:{listboxSelectedItems:this.state.selectedItems,listboxItemFocused:this.listboxItemfocused,listboxItemInvoked:this.listboxItemInvoked,listboxMultiselectable:this.props.multiselectable}},this.renderChildren()))}componentDidUpdate(e){if(!Object(l.a)(e.defaultSelection,this.props.defaultSelection)&&void 0===this.props.selectedItems){const e=this.getInitialSelection();this.updateSelection(e),this.setInitialFocus(e)}}componentDidMount(){this.setInitialFocus(this.state.selectedItems)}componentWillUnmount(){clearTimeout(this.typeAheadTimer)}generateClassNames(){const{listbox:e,listbox__disabled:t}=this.props.managedClasses;return super.generateClassNames(Object(a.a)(e,[t,this.props.disabled]))}renderChildren(){return p.a.Children.map(this.props.children,this.renderChild)}domChildren(){return Object(r.a)()&&this.rootElement.current instanceof HTMLElement?Array.from(this.rootElement.current.children):[]}setFocus(e,t){const s=this.domChildren();let i="";for(;Object(c.a)(e,s.length);){const n=s[e];if(i=n.id,this.isFocusableElement(n)){this.props.disabled||n.focus();break}e+=t}return i}}g.displayName=`${h.DisplayNamePrefix}Listbox`,g.defaultProps={multiselectable:!1,defaultSelection:[],typeAheadPropertyKey:"displayString",typeAheadEnabled:!0,focusItemOnMount:!1,managedClasses:{},selectOnFocus:!0},g.getFirstValidOptionInRange=(e,t,s,i)=>{for(let n=e;n!==t+i;n+=i){const e=s[n];return g.isValidSelectedItem(e)?e:null}},g.getValidOptions=e=>e.filter(e=>g.isValidSelectedItem(e)),g.valuePropertyKey="value",g.idPropertyKey="id",g.displayStringPropertyKey="displayString",g.disabledPropertyKey="disabled";var m=g;t.a=m},"9Vvf":function(e,t,s){"use strict";var i=s("OnwC"),n=s("uW+H"),o=s("o1qX"),a=s("ERkP"),r=s.n(a),l=s("yR4y");class c extends i.a{constructor(){super(...arguments),this.handledProps={glyph:void 0,value:void 0,id:void 0,managedClasses:void 0}}render(){const{selectOption:e,selectOption__disabled:t,selectOption__selected:s,selectOption_contentRegion:i}=this.props.managedClasses;return r.a.createElement(n.a,Object.assign({},this.unhandledProps(),{id:this.props.id,displayString:this.props.displayString,value:this.props.value,managedClasses:{listboxItem:e,listboxItem__disabled:t,listboxItem__selected:s}}),this.renderGlyph(),r.a.createElement("span",{className:Object(o.a)(i)},this.props.displayString,this.props.children))}renderGlyph(){return"function"==typeof this.props.glyph?this.props.glyph(Object(o.a)(this.props.managedClasses.selectOption_glyph)):null}}c.displayName=`${l.a}SelectOption`,c.defaultProps={managedClasses:{}};var d=c,p=s("+viU"),h=s("CSiZ");s.d(t,"a",function(){return u});const u=Object(p.a)(h.a)(d)},CSiZ:function(e,t,s){"use strict";var i=s("fz//"),n=s("3ZGc"),o=s("iuMt"),a=s("2tnv"),r=s("rRWH"),l=s("PfRV"),c=s("SP+O"),d=s("LD6M"),p=s("7b0X"),h=s("ZEO0"),u=s("zP2P"),g=s("MF9s"),m=s("GaXA"),b=s("8yfO"),f=s("objN");const y={selectOption:Object.assign({"list-style-type":"none","box-sizing":"border-box",height:Object(u.d)(),display:"flex","align-items":"center",padding:Object(i.a)("0 {0}",Object(u.f)(g.s)),margin:Object(i.a)("0 {0}",Object(n.a)(g.p)),color:c.c,fill:c.c,"white-space":"nowrap",overflow:"hidden"},Object(h.a)(),Object(b.b)("t7"),{background:d.c},Object(h.c)(),Object(l.a)(),Object(l.d)(),Object(o.a)(Object.assign({"border-color":p.a},f.x)),{"&:hover":Object.assign({background:d.b},f.y)},f.D),selectOption_contentRegion:Object.assign({overflow:"hidden"},Object(a.a)()),selectOption_glyph:{display:"inline-block",position:"relative",width:u.b,height:u.b,"flex-shrink":"0",margin:Object(r.c)(Object(i.a)("0 {0} 0 0",Object(u.f)()),Object(i.a)("0 0 0 {0}",Object(u.f)()))},selectOption__disabled:Object.assign({},Object(m.a)(),f.k,{"&, &:hover":{background:d.c}}),selectOption__selected:{[f.C]:{background:Object(i.b)(f.a.selectedBackground),"border-color":Object(i.b)(f.a.buttonText),color:Object(i.b)(f.a.selectedText),fill:Object(i.b)(f.a.selectedText)},background:d.d,"&:hover":{background:d.d}}};t.a=y},K5uZ:function(e,t,s){"use strict";var i=s("+viU"),n=s("tFIx"),o=s("OnwC"),a=s("Gy7L"),r=s("o1qX"),l=s("yqT/"),c=s("vhqU"),d=s("DCIk"),p=s("XJ1h"),h=s("r6MD"),u=s("ERkP"),g=s.n(u),m=s("8pea"),b=s("eGM7"),f=s("jAzu");class y extends o.a{constructor(e){super(e),this.handledProps={isMenuOpen:void 0,disabled:void 0,displayStringFormatter:void 0,form:void 0,labelledBy:void 0,multiselectable:void 0,trigger:void 0,menu:void 0,required:void 0,managedClasses:void 0,selectedItems:void 0,defaultSelection:void 0,onValueChange:void 0,placeholder:void 0,autoFocus:void 0,menuFlyoutConfig:void 0,onMenuSelectionChange:void 0},this.rootElement=g.a.createRef(),this.triggerId=Object(c.a)(y.triggerUniqueIdPrefix),this.checkPropsForMenuState=()=>{let e=!1;return void 0!==this.props.isMenuOpen?e=this.props.isMenuOpen:!0===this.props.multiselectable&&(e=!0),e},this.onSelectValueChange=e=>null,this.menuSelectionChange=e=>{"function"==typeof this.props.onMenuSelectionChange&&this.props.onMenuSelectionChange(e),this.updateSelection(e)},this.updateSelection=e=>{e=this.trimSelection(e);const t=this.getValueFromSelection(e);if(this.state.value===t)return;const s=this.getFormattedDisplayString(e);if("function"!=typeof this.props.onValueChange||Object(d.a)(e,this.state.selectedItems)||this.props.onValueChange(t,e,s),void 0===this.props.selectedItems){const i=this.getValidOptions();this.setState({selectedItems:e,value:t,displayString:s,selectedItemIndex:this.getSelectedItemPosInSet(i,e),selectableItemCount:i.length})}},this.updateSelectionFromProps=()=>{const e=this.trimSelection(m.a.getListboxItemDataFromIds(this.props.selectedItems,this.props.children));this.setState({selectedItems:e,value:this.getValueFromSelection(e),displayString:this.getFormattedDisplayString(e)})},this.trimSelection=e=>!1===this.props.multiselectable&&e.length>1?[this.state.selectedItems[0]]:e,this.getValueFromSelection=e=>this.props.multiselectable?e.map(e=>e.value):0===e.length?"":e[0].value,this.getSelectedItemPosInSet=(e,t)=>{if(!this.props.multiselectable&&1===t.length){const s=t[0].id,i=e.length;for(let t=0;t<i;t++)if(e[t].props[y.idPropertyKey]===s)return t+1}return 0},this.defaultTriggerRenderFunction=(e,t,s)=>{if(e.multiselectable)return null;const i=`${Object(p.a)(this.props.labelledBy)?"":`${this.props.labelledBy} `}${s}`;return g.a.createElement("button",{disabled:e.disabled,id:s,"aria-haspopup":"listbox","aria-labelledby":i,"aria-expanded":t.isMenuOpen},t.displayString)},this.defaultDisplayStringFormatter=(e,t)=>{const s=e.map(e=>e.displayString||e.value);return e.length>0?s.join(", "):t},this.handleClick=e=>{this.props.disabled||e.defaultPrevented||(e.preventDefault(),this.toggleMenu(!this.state.isMenuOpen))},this.handleKeydown=e=>{if(!this.props.disabled&&!e.defaultPrevented)switch(e.keyCode){case a.g:case a.l:e.preventDefault(),this.toggleMenu(!this.state.isMenuOpen),!1===this.validateMenuState(!this.state.isMenuOpen)&&this.focusTriggerElement();break;case a.h:e.preventDefault(),this.toggleMenu(!1),this.focusTriggerElement();break;case a.b:case a.d:e.preventDefault(),this.props.multiselectable||this.state.isMenuOpen||this.incrementSelectedOption(1);break;case a.e:case a.c:e.preventDefault(),this.props.multiselectable||this.state.isMenuOpen||this.incrementSelectedOption(-1)}},this.incrementSelectedOption=e=>{const t=g.a.Children.toArray(this.props.children);if(1===this.state.selectedItems.length){const s=m.a.getItemIndexById(this.state.selectedItems[0].id,this.props.children);if(-1!==s){const i=s+e,n=e>-1?t.length-1:0;this.selectItemInRange(i,n,t,e)}}else{const s=e>-1,i=t.length-1;this.selectItemInRange(s?0:i,s?i:0,t,e)}},this.selectItemInRange=(e,t,s,i)=>{const n=m.a.getFirstValidOptionInRange(e,t,s,i);Object(p.a)(n)||this.updateSelection([n.props])},this.toggleMenu=e=>{const t=this.validateMenuState(e);t!==this.state.isMenuOpen&&this.setState({isMenuOpen:t})},this.validateMenuState=e=>{let t=e;return void 0!==this.props.isMenuOpen?t=this.props.isMenuOpen:!0===this.props.multiselectable&&(t=!0),t},this.handleMenuBlur=e=>{!this.state.isMenuOpen||this.props.multiselectable||null===this.rootElement.current||this.rootElement.current.contains(e.relatedTarget)||this.toggleMenu(!1)},this.getFormattedDisplayString=e=>void 0===this.props.displayStringFormatter?this.defaultDisplayStringFormatter(e,this.props.placeholder):this.props.displayStringFormatter(e,this.props.placeholder),this.isFocusableButton=e=>e instanceof HTMLButtonElement&&"true"!==e.getAttribute("aria-disabled"),this.focusTriggerElement=()=>{const e=this.getTriggerButton();null!==e&&e.focus()},this.getValidOptions=()=>m.a.getValidOptions(g.a.Children.toArray(this.props.children));let t=this.trimSelection(m.a.getListboxItemDataFromIds(void 0!==this.props.selectedItems?this.props.selectedItems:this.props.defaultSelection,this.props.children));!this.props.multiselectable&&t.length>1&&(t=t.slice(0,1));const s=this.getValidOptions();this.state={selectedItems:t,value:this.getValueFromSelection(t),displayString:this.getFormattedDisplayString(t),isMenuOpen:this.validateMenuState(!1),selectedItemIndex:this.getSelectedItemPosInSet(s,t),selectableItemCount:s.length}}componentDidUpdate(e){let t=!1,s=this.state.isMenuOpen;e.multiselectable!==this.props.multiselectable&&(t=!0,s=this.checkPropsForMenuState()),e.isMenuOpen!==this.props.isMenuOpen&&(s=this.checkPropsForMenuState()),s!==this.state.isMenuOpen&&this.toggleMenu(s),e.selectedItems===this.props.selectedItems?t&&this.updateSelection(this.state.selectedItems.map(e=>e)):this.updateSelectionFromProps()}componentDidMount(){this.toggleMenu(this.checkPropsForMenuState()),!this.props.autoFocus||this.state.isMenuOpen||this.props.multiselectable||this.focusTriggerElement()}render(){return g.a.createElement("div",Object.assign({},this.unhandledProps(),{ref:this.rootElement,className:this.generateClassNames(),onKeyDown:this.handleKeydown,onClick:this.handleClick,tabIndex:-1}),this.renderTrigger(),this.renderHiddenSelectElement(),this.renderMenu())}generateClassNames(){const{select:e,select__scaleToFit:t,select__disabled:s,select_menu__open:i,select__multiSelectable:n}=this.props.managedClasses;return super.generateClassNames(Object(r.a)(e,[t,!Object(p.a)(this.props.menuFlyoutConfig)&&this.props.menuFlyoutConfig.scaleToFit],[s,this.props.disabled],[i,this.state.isMenuOpen],[n,this.props.multiselectable]))}renderHiddenSelectElement(){return g.a.createElement("select",{required:this.props.required||null,name:this.props.name||null,form:this.props.form||null,value:this.state.value,multiple:this.props.multiselectable||null,disabled:this.props.disabled||null,onChange:this.onSelectValueChange,style:{display:"none"}})}renderTrigger(){return void 0!==this.props.trigger?this.props.trigger(this.props,this.state,this.triggerId):this.defaultTriggerRenderFunction(this.props,this.state,this.triggerId)}renderMenu(){if(!this.state.isMenuOpen)return;let e=!this.props.multiselectable;this.props.multiselectable&&this.props.autoFocus&&(e=this.props.multiselectable);const t=g.a.createElement(m.a,{labelledBy:this.props.labelledBy,disabled:this.props.disabled,focusItemOnMount:e,multiselectable:this.props.multiselectable,defaultSelection:this.state.selectedItems,selectedItems:this.props.selectedItems,onSelectedItemsChanged:this.menuSelectionChange,onBlur:this.handleMenuBlur,selectOnFocus:!1,tabIndex:-1,managedClasses:{listbox:Object(h.a)(this.props.managedClasses,"select_menu",""),listbox__disabled:Object(h.a)(this.props.managedClasses,"select_menuDisabled","")}},this.props.children),s="function"==typeof this.props.menu?this.props.menu(this.props,this.state,t):t;return Object(p.a)(this.props.menuFlyoutConfig)?s:g.a.createElement(f.a,Object.assign({anchor:this.rootElement},this.props.menuFlyoutConfig,{managedClasses:this.generateViewportPositionerClassNames()}),s)}generateViewportPositionerClassNames(){const{select__menuPositioningRegion:e,select__menuPositionLeft:t,select__menuPositionRight:s,select__menuPositionTop:i,select__menuPositionBottom:n,select__menuPositionHorizontalInset:o,select__menuPositionVerticalInset:a}=this.props.managedClasses;return{viewportPositioner:e,viewportPositioner__left:t,viewportPositioner__right:s,viewportPositioner__top:i,viewportPositioner__bottom:n,viewportPositioner__horizontalInset:o,viewportPositioner__verticalInset:a}}getTriggerButton(){const e=Object(l.a)()&&this.rootElement.current instanceof HTMLElement?Array.from(this.rootElement.current.children):[],t=e.findIndex(this.isFocusableButton);return-1!==t?e[t]:null}}y.displayName=`${b.DisplayNamePrefix}Select`,y.defaultProps={multiselectable:!1,disabled:!1,defaultSelection:[],placeholder:"",managedClasses:{}},y.idPropertyKey="id",y.triggerUniqueIdPrefix="selecttrigger-";var v=y,I=s("yR4y"),S=s("uT2j"),O=s("MZhw");class k extends o.a{constructor(){super(...arguments),this.handledProps={disabled:void 0,managedClasses:void 0,menu:void 0},this.defaultTriggerRenderFunction=(e,t,s)=>{if(e.multiselectable)return null;const{select_button:i,select_buttonContentRegion:n,select_buttonDisplayText:o}=this.props.managedClasses,a=`${Object(p.a)(this.props.labelledBy)?"":`${this.props.labelledBy} `}${s}`;return g.a.createElement("button",{id:s,disabled:e.disabled,className:Object(r.a)(i),"aria-haspopup":"listbox","aria-labelledby":a,"aria-expanded":t.isMenuOpen},g.a.createElement("span",{className:Object(r.a)(n)},g.a.createElement("div",{className:Object(r.a)(o)},t.displayString),this.generateGlyph()))},this.defaultMenuRenderFunction=(e,t,s)=>g.a.createElement(S.a,{value:O.c,tag:null},s),this.generateGlyph=()=>g.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 12",className:Object(r.a)(this.props.managedClasses.select_toggleGlyph),"aria-hidden":!0,xmlns:"http://www.w3.org/2000/svg"},g.a.createElement("path",{d:"M11.3613 2.73633L11.8887 3.26367L6 9.15234L0.111328 3.26367L0.638672 2.73633L6 8.09766L11.3613 2.73633Z"}))}render(){return g.a.createElement(v,Object.assign({},this.unhandledProps(),{managedClasses:this.props.managedClasses,disabled:this.props.disabled,menu:"function"==typeof this.props.menu?this.props.menu:this.defaultMenuRenderFunction,trigger:"function"==typeof this.props.trigger?this.props.trigger:this.defaultTriggerRenderFunction}),this.props.children)}}k.displayName=`${I.a}Select`,k.defaultProps={managedClasses:{}};var x=k;s.d(t,"a",function(){return C});const C=Object(i.a)(n.a)(x)},MeOA:function(e,t){},esXg:function(e,t,s){"use strict";s.d(t,"a",function(){return r});var i=s("D57K"),n=s("mzbC"),o=s("s9+9"),a=s("9J8d");function r(){return Object(i.a)(this,void 0,void 0,function*(){return new Promise((e,t)=>Object(i.a)(this,void 0,void 0,function*(){try{let s=a.a.getInstance().rootReducer.connector(o.a.PageSettingsData);if(s)return e(s);n.a.initialize.registerObserver(()=>e(a.a.getInstance().rootReducer.connector(o.a.PageSettingsData)))}catch(e){t(e)}}))})}},kpPY:function(e,t,s){"use strict";s.d(t,"a",function(){return i}),s.d(t,"c",function(){return n}),s.d(t,"b",function(){return o});s("nwjK");function i(e,...t){return e.replace(/{(\d+)}/g,function(e,s){if(s>=t.length)return e;const i=t[s];return"number"==typeof i||i?i:""})}function n(e,t,s=0){return!(!e||!t)&&e.substr(s,t.length)===t}function o(e){return!e||!e.trim()}},looh:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("ERkP");const n=s.n(i).a.createContext({listboxItemInvoked:null,listboxItemFocused:null,listboxSelectedItems:[],listboxMultiselectable:!1})},tFIx:function(e,t,s){"use strict";var i=s("SP+O"),n=s("MZhw"),o=s("QhQn"),a=s("2tnv"),r=s("rRWH"),l=s("fz//"),c=s("3ZGc"),d=s("zP2P"),p=s("7FLv"),h=s("HzrG"),u=s("PfRV"),g=s("MF9s"),m=s("NZin"),b=s("ZEO0"),f=s("objN");const y={select:{"max-width":"374px",height:Object(d.d)()},select_button:Object.assign({},Object(b.c)(),{height:Object(d.d)(),width:"100%"},Object(m.b)(),f.w,{"&:disabled > span > svg":Object.assign({},f.l)}),select_buttonContentRegion:{display:"grid","grid-template-columns":"1fr auto","align-items":"center","justify-items":"start"},select_buttonDisplayText:Object.assign({},Object(a.a)(),{"text-align":Object(r.c)("left","right"),width:"100%"}),select_toggleGlyph:Object.assign({margin:e=>Object(r.d)(e&&e.direction||h.b.direction)(Object(l.a)("0 0 0 {0}",Object(d.f)())(e)),fill:i.c,width:d.b,height:d.b,"grid-column-start":"2"},f.n),select_menu:Object.assign({background:n.c},Object(u.b)(),Object(p.b)(p.a.e11),{position:"relative",width:"100%",margin:"0",padding:Object(l.a)("{0} 0",Object(c.a)(g.p)),"max-height":"328px",overflow:"auto",[f.C]:Object.assign({},f.v,{background:f.a.buttonBackground,border:Object(l.a)("{0} solid {1}",Object(c.a)(g.U),()=>f.a.buttonText)})}),select__multiSelectable:{"& $select_menu":{position:"static","box-shadow":"none",border:"1px solid","border-color":o.c}},select__menuPositioningRegion:{display:"grid","grid-template-columns":"1fr","grid-template-rows":"1fr"},select__menuPositionLeft:{"grid-template-columns":"1fr auto","& $select_menu":{"grid-column":"2"}},select__menuPositionRight:{"grid-template-columns":"auto 1fr","& $select_menu":{"grid-column":"1"}},select__menuPositionTop:{"grid-template-rows":"1fr auto","& $select_menu":{"grid-row":"2"}},select__menuPositionBottom:{"grid-template-rows":"auto 1fr","& $select_menu":{"grid-row":"1"}}};t.a=y},"uW+H":function(e,t,s){"use strict";var i=s("OnwC"),n=s("Gy7L"),o=s("o1qX"),a=s("ERkP"),r=s.n(a),l=s("looh"),c=s("eGM7");class d extends i.a{constructor(){super(...arguments),this.handledProps={disabled:void 0,displayString:void 0,managedClasses:void 0,id:void 0,onInvoke:void 0,value:void 0},this.isItemSelected=()=>{let e=!1;return void 0!==this.context.listboxSelectedItems&&(e=1===this.context.listboxSelectedItems.filter(e=>e.id===this.props.id).length),e},this.handleKeyDown=e=>{if(!this.props.disabled&&("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),!e.defaultPrevented))switch(e.keyCode){case n.g:case n.l:this.invokeOption(e)}},this.handleClick=e=>{this.props.disabled||("function"==typeof this.props.onClick&&this.props.onClick(e),e.defaultPrevented||this.invokeOption(e))},this.handleFocus=e=>{this.props.disabled||("function"==typeof this.context.listboxItemFocused&&this.context.listboxItemFocused(this.props,e),"function"==typeof this.props.onFocus&&this.props.onFocus(e))}}render(){return r.a.createElement("div",Object.assign({},this.unhandledProps(),{className:this.generateClassNames(),role:"option",id:this.props.id,"aria-selected":this.isItemSelected(),"aria-disabled":this.props.disabled,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown}),this.props.children)}generateClassNames(){const{listboxItem:e,listboxItem__disabled:t,listboxItem__selected:s}=this.props.managedClasses;return super.generateClassNames(Object(o.a)(e,[t,this.props.disabled],[s,this.isItemSelected()]))}invokeOption(e){this.context.listboxItemInvoked&&this.context.listboxItemInvoked(this.props,e),"function"==typeof this.props.onInvoke&&this.props.onInvoke(e,this.props)}}d.displayName=`${c.DisplayNamePrefix}ListboxItem`,d.contextType=l.a,d.defaultProps={disabled:!1,managedClasses:{}},d.contextType=l.a;var p=d;t.a=p},zSBV:function(e,t,s){"use strict";s.d(t,"a",function(){return n});var i=s("G82u");class n{}n.updateMarketSelection=new i.a("Update market selection"),n.getDefaultMarketFailed=new i.a("Get default market failed"),n.toggleDisable=new i.a("Toggle disable")}}]);
//# sourceMappingURL=marketSelector.03a32dbb6f10e52eafc0.js.map